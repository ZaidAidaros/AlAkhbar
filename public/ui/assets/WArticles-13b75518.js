import{a as A}from"./adminController-25b98fb2.js";import{A as W}from"./ArticleComp-57731040.js";import{L as x}from"./LoadingAndErrorSc-5dcb8aa1.js";import{_ as v,o as n,c as u,w as r,a as o,z as y,g,b as d,d as h,V as I,e as k,R as T,l as c,F as m,r as p,m as S,t as f,y as R}from"./index-fbd1c2bf.js";import{V as $}from"./VRow-2061db9e.js";import{V as B,a as E,b as N,c as H}from"./VTabs-793f523f.js";import{V as F}from"./VVirtualScroll-b648faba.js";import"./writterController-6ed0d7bb.js";import"./ArticleMenuList-f0b6f562.js";import"./VMenu-bf86b3b7.js";import"./VOverlay-36d5cfee.js";import"./getScrollParent-6bb6c202.js";import"./lazy-068a1f12.js";import"./VSlideGroup-32cdaed4.js";const M={};function U(e,t){return n(),u(k,{flat:""},{default:r(()=>[o(I,null,{default:r(()=>[o($,null,{default:r(()=>[o(y),e.$route.name!=="Home"?(n(),u(g,{key:0,onClick:t[0]||(t[0]=i=>e.$router.back()),"prepend-icon":"mdi-nrow"},{default:r(()=>[d(" Back ")]),_:1})):h("",!0),e.$route.name!=="Home"?(n(),u(g,{key:1,onClick:t[1]||(t[1]=i=>e.$router.push({name:"Home"})),"prepend-icon":"mdi-home"},{default:r(()=>[d(" Home ")]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1})}const z=v(M,[["render",U]]),D={components:{ArticleComp:W,LoadingAndErrorSc:x,ResMsg:T,AppFastNavBtn:z},data(){return{loading:!0,error:!1,msg:null,scrollRef:null,currentWindow:"allArticles",currentIndex:0,windows:[{index:0,title:"Articles",value:"writterArticles",isStoped:!1,count:0,page:0,articles:[],loading:!0,isLoaded:!1,error:!1,msg:null,scrollRef:null},{index:1,title:"Stoped Articles",value:"stopedWArticles",isStoped:!0,count:0,page:0,articles:[],loading:!0,isLoaded:!1,error:!1,msg:null,scrollRef:null}]}},async mounted(){await this.onTab(this.windows[0])},methods:{onTab:async function(e){this.currentWindow=e.value,this.currentIndex=e.index,e.articles.length||await this.loadArticles(e)},stopArticleToggel:async function(e){e.loading=!0,e.error=!1,e.msg=null;const t={Id:e.Id,isStoped:!e.isStoped},i=await A.updateWArticle(t);if(e.loading=!1,e.error=!i.state,e.msg=i.message,i.state){const V=this.windows[this.currentIndex].articles.filter(a=>a.Id!==e.Id);this.windows[this.currentIndex].articles=V,this.windows[this.currentIndex].count--,e.isStoped=!e.isStoped,e.isStoped?this.windows[1].isLoaded&&(this.windows[1].articles.push(e),this.windows[1].count++):this.windows[0].isLoaded&&(this.windows[0].articles.push(e),this.windows[0].count++)}setTimeout(()=>{e.msg=null},2e3)},loadArticles:async function(e){e.loading=!0,e.error=!1,e.msg=null;const t=await A.getWArticles(e.page,e.isStoped,this.$route.params.id);e.loading=!1,t.state?t.articles.length?(e.articles.push(...t.articles),t.count&&(e.count=t.count),e.page++,e.isLoaded=!0):e.msg="There Is No Articles":(e.msg=t.message,e.error=!0)}}};function j(e,t,i,V,a,_){const C=p("LoadingAndErrorSc"),b=p("ResMsg"),L=p("ArticleComp");return n(),c(m,null,[o(B,{modelValue:a.currentWindow,"onUpdate:modelValue":t[0]||(t[0]=s=>a.currentWindow=s),"fixed-tabs":""},{default:r(()=>[(n(!0),c(m,null,S(a.windows,s=>(n(),u(N,{key:s.value,value:s.value,onClick:l=>_.onTab(s)},{default:r(()=>[d(f(s.title)+" "+f(s.count),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"]),o(E,{modelValue:a.currentWindow,"onUpdate:modelValue":t[1]||(t[1]=s=>a.currentWindow=s)},{default:r(()=>[(n(!0),c(m,null,S(a.windows,s=>(n(),u(H,{key:s.value,value:s.value},{default:r(()=>[o(C,{isLoading:s.loading,msg:s.msg,error:s.error},null,8,["isLoading","msg","error"]),s.articles.length?(n(),u(F,{key:0,ref_for:!0,ref:s.scrollRef,items:s.articles,height:"500","item-height":"70"},{default:r(({item:l})=>[o(k,null,{default:r(()=>[o(R,null,{default:r(()=>[o(g,{loading:l.loading,color:l.isStoped?"green-lighten-2":"red-lighten-2",onClick:q=>_.stopArticleToggel(l)},{default:r(()=>[d(f(l.isStoped?"UnStop":"Stop"),1)]),_:2},1032,["loading","color","onClick"])]),_:2},1024),o(b,{msg:l.msg,error:l.error},null,8,["msg","error"]),o(L,{article:l,isEditable:!l.published},null,8,["article","isEditable"])]),_:2},1024)]),_:2},1032,["items"])):h("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)}const oe=v(D,[["render",j]]);export{oe as default};
