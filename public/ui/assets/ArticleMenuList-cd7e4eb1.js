import{_ as m,R as d,u as p,r as f,o as _,c as A,w as o,a as r,b as h,t as c,g as u,e as I,l as L,s as k,q as C,F as E}from"./index-3ca8d655.js";const b={name:"LikeComp",props:["articleLikes","articleId"],components:{ResMsg:d},data(){return{like:null,isAuth:!1,likes:[],error:!1,msg:null}},mounted(){this.likes=this.articleLikes,this.isAuth=this.$store.getters.isAuth,this.isAuth&&this.likes.length&&this.likes.forEach(e=>{e.userId===this.$store.getters.getUser.Id&&(this.like=e)})},computed:{likesCount(){return this.likes.filter(e=>e.like).length},disLikesCount(){return this.likes.filter(e=>!e.like).length}},methods:{onLikeAc:async function(e){if(this.isAuth){this.error=!1,this.msg=null;const t=await p.onLike(e,this.articleId,this.like);if(t.state)if(this.like)if(this.like.like===e){const a=this.likes.filter(l=>l.Id!==this.like.Id);this.likes=a,this.like=null}else{this.like.like=e;const a=this.articleLikes.map(l=>l.Id===this.like.Id?this.like:l);this.likes=a}else this.like=t.articleLike,this.articleLikes.push(this.like);else this.msg=t.message,this.error=!0,setTimeout(()=>{this.error=!1,this.msg=null},2e3)}else this.$router.push({name:"LogIn"})}}};function S(e,t,a,l,i,s){const n=f("res-msg");return _(),A(I,{flat:""},{default:o(()=>[r(u,{flat:"",size:"small",color:"primary",class:"ml-2","append-icon":this.like&&i.like.like?"mdi-thumb-up":"mdi-thumb-up-outline",onClick:t[0]||(t[0]=g=>s.onLikeAc(!0))},{default:o(()=>[h(c(s.likesCount>1e3?s.likesCount/-1001+"K":s.likesCount),1)]),_:1},8,["append-icon"]),r(u,{flat:"",size:"small",color:"primary",class:"ml-2","append-icon":this.like&&!i.like.like?"mdi-thumb-down":"mdi-thumb-down-outline",onClick:t[1]||(t[1]=g=>s.onLikeAc(!1))},{default:o(()=>[h(c(s.disLikesCount>1e3?s.disLikesCount/-1001+"K":s.disLikesCount),1)]),_:1},8,["append-icon"]),r(n,{msg:i.msg,error:i.error},null,8,["msg","error"])]),_:1})}const v=m(b,[["render",S],["__scopeId","data-v-87c15ae3"]]),B={name:"BookMark",props:["article"],components:{ResMsg:d},data(){return{marked:!1,isAuth:!1,markLoading:!1,error:!1,msg:null}},mounted(){this.isAuth=this.$store.getters.isAuth},methods:{shareArticle:function(){navigator.share?navigator.share({title:this.article.title,text:this.article.shortContent,url:"https://alakhbar.onrender.com/articlePage/"+this.article.Id}).then(()=>console.log("Shared successfully")).catch(e=>console.error("Error sharing:",e)):console.log("Web Share API not supported")},saveArticleForLaterReading:async function(){if(this.isAuth)if(this.error=!1,this.msg=null,this.mark)this.msg="Already Saved";else{const e=await p.addBookMark(this.article.Id);this.error=!e.state,this.msg=e.message,setTimeout(()=>{this.error=!1,this.msg=null},2e3)}else this.$router.push({name:"LogIn"})}}};function P(e,t,a,l,i,s){const n=f("res-msg");return _(),L(E,null,[r(n,{msg:i.msg,error:i.error},null,8,["msg","error"]),r(C,null,{default:o(()=>[r(k,{title:e.$t("share"),"append-icon":"mdi-share-variant",color:"secondary",onClick:s.shareArticle},null,8,["title","onClick"]),r(k,{title:e.$t("readLater"),"append-icon":"mdi-book-marker",color:"secondary",onClick:s.saveArticleForLaterReading},null,8,["title","onClick"])]),_:1})],64)}const y=m(B,[["render",P]]);export{y as A,v as L};
