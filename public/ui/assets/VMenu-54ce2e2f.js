import{m as K,a as V,V as C}from"./VOverlay-4ffdd9e4.js";import{K as $,a as E,p as P,T,D as F,b5 as b,b6 as L,b7 as k,b8 as B,b9 as I,ba as q,aS as U,O as R,bb as X,bc as Y,Q as A,S as j,bd as H,aQ as N,be as Q,W,Y as G,aG as z,aO as J,bf as Z,X as _,bg as D,bh as ee,a0 as S}from"./index-66536040.js";const te=F({target:[Object,Array]},"v-dialog-transition"),ne=$()({name:"VDialogTransition",props:te(),setup(o,m){let{slots:n}=m;const i={onBeforeEnter(a){a.style.pointerEvents="none",a.style.visibility="hidden"},async onEnter(a,y){var v;await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),a.style.visibility="";const{x:u,y:s,sx:t,sy:f,speed:d}=O(o.target,a),h=b(a,[{transform:`translate(${u}px, ${s}px) scale(${t}, ${f})`,opacity:0},{}],{duration:225*d,easing:L});(v=M(a))==null||v.forEach(l=>{b(l,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*d,easing:k})}),h.finished.then(()=>y())},onAfterEnter(a){a.style.removeProperty("pointer-events")},onBeforeLeave(a){a.style.pointerEvents="none"},async onLeave(a,y){var v;await new Promise(l=>requestAnimationFrame(l));const{x:u,y:s,sx:t,sy:f,speed:d}=O(o.target,a);b(a,[{},{transform:`translate(${u}px, ${s}px) scale(${t}, ${f})`,opacity:0}],{duration:125*d,easing:B}).finished.then(()=>y()),(v=M(a))==null||v.forEach(l=>{b(l,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*d,easing:k})})},onAfterLeave(a){a.style.removeProperty("pointer-events")}};return()=>o.target?E(T,P({name:"dialog-transition"},i,{css:!1}),n):E(T,{name:"dialog-transition"},n)}});function M(o){var n;const m=(n=o.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return m&&[...m]}function O(o,m){const n=I(o),i=q(m),[a,y]=getComputedStyle(m).transformOrigin.split(" ").map(c=>parseFloat(c)),[u,s]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let t=n.left+n.width/2;u==="left"||s==="left"?t-=n.width/2:(u==="right"||s==="right")&&(t+=n.width/2);let f=n.top+n.height/2;u==="top"||s==="top"?f-=n.height/2:(u==="bottom"||s==="bottom")&&(f+=n.height/2);const d=n.width/i.width,h=n.height/i.height,v=Math.max(1,d,h),l=d/v||0,x=h/v||0,e=i.width*i.height/(window.innerWidth*window.innerHeight),r=e>.12?Math.min(1.5,(e-.12)*10+1):1;return{x:t-(a+i.left),y:f-(y+i.top),sx:l,sy:x,speed:r}}const ae=F({id:String,...U(K({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ne}}),["absolute"])},"VMenu"),re=$()({name:"VMenu",props:ae(),emits:{"update:modelValue":o=>!0},setup(o,m){let{slots:n}=m;const i=R(o,"modelValue"),{scopeId:a}=X(),y=Y(),u=A(()=>o.id||`v-menu-${y}`),s=j(),t=H(V,null),f=N(0);Q(V,{register(){++f.value},unregister(){--f.value},closeParents(e){setTimeout(()=>{!f.value&&!o.persistent&&(e==null||e&&!Z(e,s.value.contentEl))&&(i.value=!1,t==null||t.closeParents())},40)}});async function d(e){var g,p,w;const r=e.relatedTarget,c=e.target;await _(),i.value&&r!==c&&((g=s.value)!=null&&g.contentEl)&&((p=s.value)!=null&&p.globalTop)&&![document,s.value.contentEl].includes(c)&&!s.value.contentEl.contains(c)&&((w=D(s.value.contentEl)[0])==null||w.focus())}W(i,e=>{e?(t==null||t.register(),document.addEventListener("focusin",d,{once:!0})):(t==null||t.unregister(),document.removeEventListener("focusin",d))});function h(e){t==null||t.closeParents(e)}function v(e){var r,c,g;if(!o.disabled)if(e.key==="Tab"||e.key==="Enter"&&!o.closeOnContentClick){if(e.key==="Enter"&&e.target instanceof HTMLTextAreaElement)return;e.key==="Enter"&&e.preventDefault(),ee(D((r=s.value)==null?void 0:r.contentEl,!1),e.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(i.value=!1,(g=(c=s.value)==null?void 0:c.activatorEl)==null||g.focus())}else["Enter"," "].includes(e.key)&&o.closeOnContentClick&&(i.value=!1,t==null||t.closeParents())}function l(e){var c;if(o.disabled)return;const r=(c=s.value)==null?void 0:c.contentEl;r&&i.value?e.key==="ArrowDown"?(e.preventDefault(),S(r,"next")):e.key==="ArrowUp"&&(e.preventDefault(),S(r,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(i.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>l(e))))}const x=A(()=>P({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-owns":u.value,onKeydown:l},o.activatorProps));return G(()=>{const e=C.filterProps(o);return E(C,P({ref:s,id:u.value,class:["v-menu",o.class],style:o.style},e,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,absolute:!0,activatorProps:x.value,"onClick:outside":h,onKeydown:v},a),{activator:n.activator,default:function(){for(var r=arguments.length,c=new Array(r),g=0;g<r;g++)c[g]=arguments[g];return E(z,{root:"VMenu"},{default:()=>{var p;return[(p=n.default)==null?void 0:p.call(n,...c)]}})}})}),J({id:u,Î¨openChildren:f},s)}});export{re as V,ne as a};
