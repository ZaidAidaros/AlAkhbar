import{_ as c,R as y,L as v,c as P,w as m,e as b,r as p,o as V,a,f as w,v as k,C as f,b as $,g as C}from"./index-94f5182d.js";import{c as q,b as R,u as I,g as T}from"./getCurrentUser-b51edf58.js";import{s as N}from"./signin-2263bfec.js";import{l as g}from"./logout-2a39af6c.js";import{r as h}from"./authController-e8517d7f.js";async function F(s,e){return await q(R,e,s).then(r=>({state:!0,result:r})).catch(r=>({state:!1,result:r}))}async function L(s,e){return await I(s,e).then(r=>({state:!0,result:r})).catch(r=>({state:!1,result:r}))}const B={name:"ResetPassword",data:()=>({visible:!1,loading:!1,error:!1,msg:null,password:null,confirmPassword:null,rules:{required:s=>!!s||"Required.",password:s=>s.length>=6&&s.length<=20||"Max 20 characters , Min 6"}}),methods:{submit:async function(){if((await this.$refs.restPassForm.validate()).valid)if(this.password===this.confirmPassword){this.loading=!0,this.error=!1,this.msg=null;const e=this.$route.query.contact,r=this.$route.query.otp,l=this.$route.query.idToken;if(r){let{state:n,result:i}=await F(this.password,r);if(n){let{state:t,result:d}=await N(e,this.password);if(t){const o=await d.user.getIdToken(),u=await h({newPassword:this.password,phoneEmail:e,token:o});this.loading=!1,this.error=!u.state,this.msg=u.message,u.state&&(await g(),this.msg+=`
 Wait Will Redirect You To Log In Page`,setTimeout(()=>{this.$router.push({name:"LogIn",query:{email:e}})},2e3))}}else this.error=!0,this.msg=i.message}else if(l){let{state:n,result:i}=await L(T(),this.password);if(n){const t=await h({newPassword:this.password,phoneEmail:e,token:l});this.error=!t.state,this.msg=t.message,t.state&&(await g(),this.$router.push({name:"LogIn",query:{phone:e}}))}else this.error=!0,this.msg=i.message}else this.msg="invalid Access...";this.loading=!1}else this.error=!0,this.msg="The Passwords Not Matched"}},components:{ResMsg:y,LogoComp:v}};function E(s,e,r,l,n,i){const t=p("logo-comp"),d=p("res-msg");return V(),P(b,{class:"mx-auto py-4 px-8",elevation:"8","max-width":"448",rounded:"lg",align:"center",justify:"center"},{default:m(()=>[a(t,{size:"150"}),a(k,{ref:"restPassForm"},{default:m(()=>[a(w,{modelValue:s.password,"onUpdate:modelValue":e[0]||(e[0]=o=>s.password=o),rules:[s.rules.required,s.rules.password],"append-inner-icon":s.visible?"mdi-eye-off":"mdi-eye",type:s.visible?"text":"password","onClick:appendInner":e[1]||(e[1]=o=>s.visible=!s.visible),class:"mt-4",color:"primary",label:"Password",placeholder:"Enter Your New Password",variant:"underlined"},null,8,["modelValue","rules","append-inner-icon","type"]),a(w,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=o=>s.confirmPassword=o),rules:[s.rules.required,s.rules.password],"append-inner-icon":s.visible?"mdi-eye-off":"mdi-eye",type:s.visible?"text":"password","onClick:appendInner":e[3]||(e[3]=o=>s.visible=!s.visible),class:"my-4",color:"primary",label:"Password",placeholder:"Enter Your New Password",variant:"underlined"},null,8,["modelValue","rules","append-inner-icon","type"])]),_:1},512),a(f,{class:"my-2"}),a(d,{msg:s.msg,error:s.error},null,8,["msg","error"]),a(f,{class:"my-2"}),a(C,{onClick:i.submit,loading:s.loading,block:"",class:"my-4",color:"primary",size:"large",type:"submit",variant:"elevated"},{default:m(()=>[$(" Rest Your Password ")]),_:1},8,["onClick","loading"])]),_:1})}const j=c(B,[["render",E]]);export{j as default};
